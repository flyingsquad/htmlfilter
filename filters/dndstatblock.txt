<html>

<head>
<title>@{title}</title>
<STYLE type="text/css" media="screen,print">
	
	blockquote, .secret {
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-size: 10pt;
		margin-left: .25in;
		text-indent: 0in;
		background-color: lightgrey;
		border: 1px solid gray;
		padding: 2px;
	}

	p.normal {
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-size: 10pt;
		margin-top: 0in;
		margin-bottom: 0in;
	}

	h1, p.h1 {
		margin-top: .25in;
		margin-bottom: 0in;
		font-family: "Georgia", "Times New Roman", serif;
		font-size: 16pt;
		font-weight: bold;
		color: darkred;
		text-indent: 0in;
		margin-left: 0in;
		page-break-after: avoid;
		break-after: avoid;
	}

	h1.title {
		margin-top: 0in;
		margin-bottom: 0in;
		font-family: "Georgia", "Times New Roman", serif;
		font-size: 16pt;
		font-weight: bold;
		color: darkred;
		text-indent: 0in;
		margin-left: 0in;
		text-align: left;
		page-break-after: avoid;
		break-after: avoid;
	}

	h2, p.h2 {
		margin-top: .10in;
		margin-bottom: 0in;
		font-family: "Georgia", "Times New Roman", serif;
		font-size: 14pt;
		font-weight: bold;
		color: darkred;
		text-indent: 0in;
		margin-left: 0in;
		page-break-after: avoid;
		break-after: avoid;
	}

	h3, p.h3 {
		margin-top: .10in;
		margin-bottom: 0in;
		font-family: "Georgia", "Times New Roman", serif;
		font-size: 12pt;
		font-weight: bold;
		color: darkred;
		text-indent: 0in;
		margin-left: 0in;
		page-break-after: avoid;
		break-after: avoid;
	}

	p.spellhdr {
		margin-top: .10in;
		margin-bottom: 0in;
		font-family: "Georgia", "Times New Roman", serif;
		font-size: 12pt;
		font-weight: bold;
		font-variant: small-caps;
		color: darkred;
		text-indent: 0in;
		margin-left: 0in;
		page-break-after: avoid;
		break-after: avoid;
	}

	h4, p.h4 {
		margin-top: .10in;
		margin-bottom: 0in;
		font-family: "Georgia", "Times New Roman", serif;
		font-size: 12pt;
		font-weight: bold;
		color: darkred;
		text-indent: 0in;
		margin-left: 0in;
		page-break-after: avoid;
		break-after: avoid;
	}

	h5, p.h5 {
		margin-top: .10in;
		margin-bottom: 0in;
		font-family: "Georgia", "Times New Roman", serif;
		font-size: 12pt;
		font-weight: italic;
		color: darkred;
		text-indent: 0in;
		margin-left: 0in;
		page-break-after: avoid;
		break-after: avoid;
	}

	p.char {
		margin-top: .10in;
		margin-bottom: 0in;
		font-family: "Georgia", "Times New Roman", serif;
		font-size: 14pt;
		font-weight: bold;
		color: darkred;
		text-indent: 0in;
		margin-left: 0in;
	}

	hr { 
	  display: block;
	  margin-top: 0.5em;
	  margin-bottom: 0.5em;
	  margin-left: 0;
	  margin-right: auto;
	  border-style: inset;
	  border-width: 0;
	  height: 3px;
	  color: darkred;
	  background-color: darkred;
	  width: 300px;
	  text-align: left;
	}

	p.sb {
		margin-top: .10in;
		margin-bottom: 0in;
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-size: 10pt;
		text-indent: 0in;
		margin-left: 0in;
	}

	p.exdent {
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-size: 10pt;
		margin-top: 0in;
		margin-bottom: 0in;
		text-indent: -.25in;
		margin-left: .25in;
	}

	p.img {
		margin: 0.1in;
		text-align: center;
	}

	p.spell {
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-size: 10pt;
		margin-top: 0in;
		margin-bottom: 0in;
		text-indent: -.25in;
		margin-left: .25in;
	}

	p.spellfirst {
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-size: 10pt;
		margin-top: 0.05in;
		margin-bottom: 0in;
		text-indent: -.25in;
		margin-left: .25in;
	}


	p.italic {
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-style: italic;
		font-size: 10pt;
		margin-top: 0in;
		margin-bottom: 0in;
		text-indent: -.25in;
		margin-left: .25in;
	}

	p, p.indent {
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-size: 10pt;
		margin-top: 0in;
		margin-bottom: 0in;
		text-indent: .25in;
	}

	p.detail {
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-size: 10pt;
		margin-top: 0in;
		margin-bottom: 0in;
		margin-left: .5in;
		text-indent: -.25in;
	}
	
	td.abil {
		font-weight: bold;
		text-align: center;
	}

	p.desc {
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-size: 10pt;
		margin-top: 0in;
		margin-bottom: 0in;
		margin-left: .5in;
	}

	div.character {
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-size: 10pt;
		margin-top: 0in;
		margin-bottom: 0in;
		text-indent: .25in;
	}
	
	div.twocol {
		column-count: 2;
		column-gap: 0.25in;
		margin-top: 0.25in;
	}

	p.subpar {
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-size: 10pt;
		margin-top: 0in;
		margin-bottom: 0in;
		text-indent: -.25in;
		margin-left: .5in;
	}

	span.prep {
		color: darkred;
	}

	td {
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		text-align: center;
		font-size: 10pt;
		margin-top: 0in;
		margin-bottom: 0in;
		text-indent: 0in;
	}
	
	ul {
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-size: 10pt;
		display: block;
		list-style-type: disc;
		text-indent: 0;
		margin: 0;
		#padding-left: 1em;
	}
	
	li {
		margin: 0;
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-size: 10pt;
		text-indent: 0;
		padding-left: 0;
	}
	
	.entry-title-inner {
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-size: 10pt;
		font-style: italic;
	}

	.tapered-rule {
		margin-top: .1in;
		margin-bottom: .1in;
		display: block;
		width: 100%;
		height: 5px;
		border: none;
		color: #922610;
		fill: #922610;
	}
	
	.text-center {
		text-align: center;
		font-family: "Trebuchet MS", "Arial", "Helvetica", sans-serif;
		font-size: 10pt;
	}
	
	.top-margin {
		margin-top: 0.05in;
	}
	
</STYLE>

</head>

<body>
<div class="twocol">
<h1 class="title">@{name}</h1>
@@if{playername}
	<p style="page-break-after: avoid; break-after: avoid;"><b>Player: @{playername}</b></p>
@@endif
@@if{img}
<p class="img"><img src="@{img}" alt="@{name}" width="200"></p>
@@endif
@@if{actorType='character'}
	<p class="exdent">@{classList} (@{xp}/@{nextLevelXP})</p>
@@end
<p class="italic">@{size} @{race}, @{alignment}</p>
<p class="exdent"><b>Armor Class</b> @{ac}@@if{acdetails}&nbsp;(@{acdetails})@@end</p>
<p class="exdent"><b>Hit Points</b> @{hp} @@if{actorType='npc'} (@{system.attributes.hp.formula})@@end</p>
<p class="exdent"><b>Speed</b> @{speed}</p>
<p class="exdent"><b>Proficiency Bonus</b> @{prof}</p>

<svg height="5" width="100%" class="tapered-rule" style="page-break-after: avoid; break-after: avoid;">
  <polyline points="0,0 300,2.5 0,5" stroke="darkred"></polyline>
</svg>

<table border="0" cellpadding="2" cellspacing="0" width="300" style="page-break-after: avoid; break-after: avoid;">
  <tr style="page-break-after: avoid; break-after: avoid;">
    <td class="abil">STR</td>
    <td class="abil">DEX</td>
    <td class="abil">CON</td>
    <td class="abil">INT</td>
    <td class="abil">WIS</td>
    <td class="abil">CHA</td>
  </tr>
  <tr style="page-break-after: avoid; break-after: avoid;">
    <td align="center">@{str}<br>(@{sign(strMod)})</td>
    <td align="center">@{dex}<br>(@{sign(dexMod)})</td>
    <td align="center">@{con}<br>(@{sign(conMod)})</td>
    <td align="center">@{int}<br>(@{sign(intMod)})</td>
    <td align="center">@{wis}<br>(@{sign(wisMod)})</td>
    <td align="center">@{cha}<br>(@{sign(chaMod)})</td>
  </tr>
</table>

<svg height="5" width="100%" class="tapered-rule">
  <polyline points="0,0 300,2.5 0,5" stroke="darkred"></polyline>
</svg>

@@macro{trait(TITLE, TRAIT)}
	@@if{TRAIT}
		<p class="exdent"><b>TITLE</b> @{TRAIT}</p>
	@@end
@@endmacro

@@call{trait(Skills, skills)}
<p class="exdent"><b>Saving Throws</b> Str @{sign(strSave)}, Dex @{sign(dexSave)}, Con @{sign(conSave)},
Int @{sign(intSave)}, Wis @{sign(wisSave)}, Cha @{sign(chaSave)}</p>
@@call{trait(Languages, languages)}
@@call{trait(Senses, senses)}
@@call{trait(Weapon Proficiencies, weaponProficiencies)}
@@call{trait(Armor Proficiencies, armorProficiencies)}
@@call{trait(Tool Proficiencies, toolProficiencies)}
@@if{actorType != 'character'}
	<p class="exdent"><b>Challenge</b> @{system.details.cr} (@{system.details.xp.value} XP)</p>
@@endif
@@call{trait(Damage Resistances, damageResistances)}
@@call{trait(Damage Immunities, damageImmunities)}
@@call{trait(Damage Vulnerabilities, damageVulnerabilities)}
@@call{trait(Condition Immunities, conditionImmunities)}

@@if{system.details.biography.value || system.details.appearance || system.details.trait || system.details.ideal }
@@if{actorType = 'character'}
<h2>Biography</h2>
@@end
@@if{actorType != 'character'}
<h2>Description</h2>
@@end
@@if{system.details.biography.value}
<p class='indent'>@{system.details.biography.value}</p>
@@end
@@if{system.details.appearance}
<p class='indent'><b>Appearance:</b> @{system.details.appearance}</p>
@@end
@@if{system.details.eyes}
<p class='indent'><b>Eyes:</b> @{system.details.eyes}</p>
@@endif
@@if{system.details.height}
<p class='indent'><b>Height:</b> @{system.details.height}</p>
@@endif
@@if{system.details.faith}
<p class='indent'><b>Faith:</b> @{system.details.faith}</p>
@@endif
@@if{system.details.hair}
<p class='indent'><b>Hair:</b> @{system.details.hair}</p>
@@endif
@@if{system.details.weight}
<p class='indent'><b>Weight:</b> @{system.details.weight}</p>
@@endif
@@if{system.details.gender}
<p class='indent'><b>Gender:</b> @{system.details.gender}</p>
@@endif
@@if{system.details.skin}
<p class='indent'><b>Skin:</b> @{system.details.skin}</p>
@@endif
@@if{system.details.age}
<p class='indent'><b>Age:</b> @{system.details.age}</p>
@@endif
@@if{system.details.trait}
<p class='indent'><b>Personality Traits:</b> @{system.details.trait}</p>
@@end
@@if{system.details.ideal}
<p class='indent'><b>Ideals:</b> @{system.details.ideal}</p>
@@end
@@if{system.details.bond}
<p class='indent'><b>Bonds:</b> @{system.details.bond}</p>
@@end
@@if{system.details.flaw}
<p class='indent'><b>Flaws:</b> @{system.details.flaw}</p>
@@end
@@end

@@if{count('background')>0}
	<h2>Background</h2>
	@@foreach{background}
		<p class="exdent"><b>@{itemname}</b></p>
		@@if{showDetails && itemdetails && strlength(itemdetails) <= maxDetails}
			<p class="desc">@{itemdetails}</p>
		@@endif
	@@endforeach
@@endif

@@if{count('weapon')>0}
	<h2>Attacks</h2>
	@@foreach{weapon}
		<p class="exdent"><b>@{itemname}</b>. @{itemstats}</p>
		@@if{showDetails && itemdetails && strlength(itemdetails) <= maxDetails}
			<p class="desc">@{itemdetails}</p>
		@@endif
	@@endforeach
@@endif
@@if{actorType = 'character'}
<h2>Class and Subclass</h2>
@@end
@@if{count('class') > 0}
	@@foreach{class}
		<h3>@{itemname} @{item.system.levels}</h3>
		@@if{showDetails && itemdetails && strlength(itemdetails) <= maxDetails}
			<p class="desc">@{itemdetails}</p>
		@@endif
	@@endforeach
@@endif

@@if{count('subclass') > 0}
	@@foreach{subclass}
		<h3>@{itemname}</h3>
		@@if{showDetails && itemdetails && strlength(itemdetails) <= maxDetails}
			<p class="desc">@{itemdetails}</p>
		@@endif
	@@endforeach
@@endif

@@if{count('feat') > 0}
	<h2>Features</h2>
	@@foreach{feat}
		<p class="exdent"><b>@{itemname}</b>. @{itemstats}</p>
		@@if{showDetails && itemdetails && strlength(itemdetails) <= maxDetails}
			<p class="desc">@{itemdetails}</p>
		@@endif
	@@endforeach
@@end

@@macro{curr(COIN)}
@@if{system.currency.COIN}@{cdelim}@{system.currency.COIN}COIN@@define{cdelim=', '}@@endif
@@endmacro
@@if{system.currency.pp || system.currency.gp || system.currency.ep || system.currency.sp || system.currency.cp}
<h2>Currency</h2>
@@define{cdelim=''}
<p>@@call{curr(pp)}@@call{curr(gp)}@@call{curr(ep)}@@call{curr(sp)}@@call{curr(cp)}</p>
@@endif

@@macro{container()}
@@if{container}&nbsp;(in @{container})@@endif
@@endmacro
@@if{count('equipment') > 0}
	<h2>Equipment</h2>
	@@foreach{equipment}
		<p class="exdent"><b>@{itemname}</b>. @{itemstats}@@call{container()}</p>
		@@if{showDetails && itemdetails && strlength(itemdetails) <= maxDetails}
			<p class="desc">@{itemdetails}</p>
		@@end
	@@end
@@end
@@if{count('consumable') > 0}
	<h2>Consumables</h2>
	@@foreach{consumable}
		<p class="exdent"><b>@{itemname}</b>. @{itemstats}@@call{container()}</p>
		@@if{showDetails && itemdetails && strlength(itemdetails) <= maxDetails}
			<p class="desc">@{itemdetails}</p>
		@@end
	@@end
@@end
@@macro{coin(COIN)}
@@if{item.system.currency.COIN}@{cdelim}@{item.system.currency.COIN}COIN@@define{cdelim=', '}@@endif
@@endmacro
@@macro{currency(lm)}
@@if{item.system.currency.cp || item.system.currency.sp || item.system.currency.ep || item.system.currency.gp || item.system.currency.pp}
	<p style="margin-left: ${lm}">Coins: @@define{cdelim=''}@@call{coin(pp)}@@call{coin(gp)}@@call{coin(ep)}@@call{coin(sp)}@@call{coin(cp)}</p>
@@endif
@@endmacro
@@if{count('container') > 0}
	<h2>Containers</h2>
	@@foreach{container}
		<p class="exdent"><b>@{itemname}</b>. @{itemstats}</p>
		@@call{currency(.25in)}
		@@if{showDetails && itemdetails && strlength(itemdetails) <= maxDetails}
			<p class="desc">@{itemdetails}</p>
		@@end
		<!-- Check for itemcollection entries. -->
		@@if{count('item.items')>0}
			<div style="margin-left: 0.25in">
			@@foreach{item.items}
				<p class="exdent"><b>@{itemname}</b>. @{itemstats}</p>
				@@if{showDetails && itemdetails && strlength(itemdetails) <= maxDetails}
					<p class="exdent">@{itemdetails}</p>
				@@end
				@@call{currency(.5in)}
				@@if{count('item.items')>0}
					<div style="margin-left: 0.25in">
					@@foreach{item.items}
						<p class="exdent"><b>@{itemname}</b>. @{itemstats}</p>
						@@if{showDetails && itemdetails && strlength(itemdetails) <= maxDetails}
							<p class="exdent">@{itemdetails}</p>
						@@end
						@@call{currency(.25in)}
						@@if{count('item.items')>0}
							<div style="margin-left: 0.5in">
							@@foreach{item.items}
								<p class="exdent"><b>@{itemname}</b>. @{itemstats}</p>
								@@if{showDetails && itemdetails && strlength(itemdetails) <= maxDetails}
									<p class="exdent">@{itemdetails}</p>
								@@end
								@@call{currency(.25in)}
							@@endforeach
							</div>
						@@endif
					@@endforeach
					</div>
				@@endif
			@@endforeach
			</div>
		@@endif
	@@end
@@end
@@if{count('tool') > 0}
	<h2>Tools</h2>
	@@foreach{tool}
		<p class="exdent"><b>@{itemname}</b>. @{itemstats}@@call{container()}</p>
		@@if{showDetails && itemdetails && strlength(itemdetails) <= maxDetails}
			<p class="desc">@{itemdetails}</p>
		@@end
	@@end
@@end
@@if{count('loot') > 0}
	<h2>Treasure</h2>
	@@foreach{loot}
		<p class="exdent"><b>@{itemname}</b>. @{itemstats}@@call{container()}</p>
		@@if{showDetails && itemdetails && strlength(itemdetails) <= maxDetails}
			<p class="desc">@{itemdetails}</p>
		@@end
	@@end
@@end

@@if{count('spell') > 0}
	<h2>Spellcasting</h2>
	@@if{spellcasting}
		<p class="exdent">@{spellcasting}</p>
	@@end
	@@define{spells = ''}
	@@define{pactmagic = ''}
	@@define{innatespells = ''}
	@@define{atwillspells = ''}
	@@foreach{spell}
		@@if{item.system.level = 0}
			@@define{spells = concat(spells, ', ', itemname)}
		@@endif
		@@if{item.system.preparation.mode = 'atwill'}
			@@define{atwillspells = concat(atwillspells, ', ', itemname)}
		@@endif
		@@if{item.system.preparation.mode = 'innate'}
			@@define{innatespells = concat(innatespells, ', ', itemname)}
		@@endif
		@@if{item.system.preparation.mode = 'pact'}
			@@define{pactmagic = concat(pactmagic, ', ', itemname)}
		@@endif
	@@endforeach
	@@if{atwillspells}
		<p><b>At-Will:</b> @{atwillspells}</p>
	@@endif
	@@if{innatespells}
		<p><b>Innate Spellcasting:</b> @{innatespells}</p>
	@@endif
	@@if{spells}
		<p><b>Cantrip:</b> @{spells}</p>
	@@endif
	@@for{slot=1; slot < 10; slot = slot + 1}
		@@define{nslots = *('system.spells.spell' + slot + '.max')}
		@@if{nslots > 0}
			<p><b>Level @{slot}</b> (@{nslots}):
			@@define{spells = ''}
			@@foreach{spell}
				@@if{item.system.level = slot && (item.system.preparation.mode = 'prepared' || item.system.preparation.mode = 'always')}
					@@define{prepared=''}
					@@if{item.system.preparation.prepared || item.system.preparation.mode = 'always'}
						@@define{prepared='â€¢'}
					@@endif
					@@define{spells = concat(spells, ', ', prepared + itemname)}
				@@endif
			@@endforeach
			@@if{spells}@{spells}@@endif
			</p>
		@@endif
	@@endfor
	@@if{pactmagic}
		<p><b>Pact Magic:</b> @{pactmagic}</p>
	@@endif
@@endif

@@if{count('spell') > 0 && showSpellbook}
	<h2>Spells</h2>
	@@foreach{spell}
		<p class="spellhdr">@{itemname}</p>
		<p class="italic">@{spellLevel}</p>
		<p class="spellfirst"><b>Casting Time:</b> @{spellCastTime}</p>
		<p class="spell"><b>Range:</b> @{spellRange}</p>
		<p class="spell"><b>Components:</b> @{spellComponents}</p>
		<p class="spell"><b>Duration:</b> @{spellDuration}</p>
		<p class="desc">@{itemdetails}</p>
	@@endforeach
@@endif
</div>
</body>

</html>
